<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AOE4 Battle Simulator</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Our main JS (will create this next) -->
  <script defer src="script.js"></script>
</head>

<body class="bg-light p-3">
  <div class="container">
    <h1 class="text-center mb-4">AOE4 Battle Simulator</h1>

    <div class="row g-4">

      <!-- ====================== UNIT A (LEFT) ====================== -->
      <div class="col-md-5">
        <div class="card p-3 shadow-sm">
          <h4>Unit A</h4>

          <!-- Unit Selection -->
          <select id="unitASelect" class="form-select mb-3"></select>

          <!-- Age Selection -->
          <div class="mb-2">
            <label for="unitAAge" class="form-label">Age:</label>
            <select id="unitAAge" class="form-select form-select-sm" style="width:auto;">
              <option value="2">Age II</option>
              <option value="3">Age III</option>
              <option value="4">Age IV</option>
            </select>
          </div>

          <!-- Primary / Secondary / Both Attack Toggle -->
          <div class="attack-toggle btn-group mb-3" role="group">
            <input type="radio" class="btn-check" name="attackSelectA" id="attackA1" value="primary" checked>
            <label class="btn btn-outline-primary" for="attackA1">Primary</label>

            <input type="radio" class="btn-check" name="attackSelectA" id="attackA2" value="secondary">
            <label class="btn btn-outline-primary" for="attackA2">Secondary</label>

            <input type="radio" class="btn-check" name="attackSelectA" id="attackABoth" value="both">
            <label class="btn btn-outline-primary" for="attackABoth">Both</label>
          </div>

          <!-- Unit Count -->
          <div class="mb-3">
            <label>Unit Count</label>
            <input id="countA" type="number" class="form-control" value="10" min="1">
          </div>

          <!-- EDITABLE STATS — this is the big change -->
          <hr>
          <h5>Editable Stats (overrides JSON)</h5>
          <div class="row g-2 small">
            <div class="col-6"><label>HP</label><input id="unitAHP" type="number" class="form-control form-control-sm"></div>
            <div class="col-6"><label>Melee Armor</label><input id="unitAMeleeArmor" type="number" class="form-control form-control-sm"></div>
            <div class="col-6"><label>Ranged Armor</label><input id="unitARangedArmor" type="number" class="form-control form-control-sm"></div>
            <div class="col-6"><label>Attack</label><input id="unitAAttack" type="number" class="form-control form-control-sm"></div>
            <div class="col-6"><label>Attack Speed (s)</label><input id="unitAAttackSpeed" type="number" step="0.01" class="form-control form-control-sm"></div>
            <div class="col-6"><label>Range</label><input id="unitARange" type="number" step="0.01" class="form-control form-control-sm"></div>
            <div class="col-12"><label>Bonus Damage (JSON)</label>
              <input id="unitABonus" type="text" class="form-control form-control-sm" placeholder='e.g. {"Ranged": 9, "Cavalry": 5}'>
            </div>
          </div>

          <!-- Buffs (you already had these — keep them) -->
          <hr>
          <h5>Buffs</h5>
          <div id="buffA">
            <!-- Your existing buff inputs here (unchanged) -->
            <!-- Attack Buff -->
            <div class="row g-2 mb-2 align-items-end">
              <div class="col-4"><label>Attack + Abs</label><input id="buffAAttackAbs" type="number" class="form-control" value="0"></div>
              <div class="col-4"><label>Attack + %</label><input id="buffAAttackPct" type="number" class="form-control" value="0"></div>
              <div class="col-4"><label>Duration (s)</label><input id="buffAAttackDur" type="number" class="form-control" value="0"></div>
            </div>
            <!-- HP, Attack Speed, Armor buffs — keep exactly as you had -->
            <!-- ... (I left your original buff code intact) ... -->
          </div>

          <!-- Combat Advantage -->
          <div class="card mt-3">
            <div class="card-header">Combat Advantage</div>
            <div class="card-body">
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" id="firstHitEnabledA">
                <label class="form-check-label" for="firstHitEnabledA">Enable first-hit advantage</label>
              </div>
              <div class="mb-2">
                <label for="freeHitsA" class="form-label">Free hits before opponent starts</label>
                <input type="number" class="form-control" id="freeHitsA" min="0" step="1" value="0">
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ====================== BATTLE BUTTON ====================== -->
      <div class="col-md-2 d-flex flex-column align-items-center justify-content-center">
        <button id="battleBtn" class="btn btn-danger btn-lg">Battle</button>
      </div>

      <!-- ====================== UNIT B (RIGHT) — EXACT COPY OF UNIT A ====================== -->
      <div class="col-md-5">
        <div class="card p-3 shadow-sm">
          <h4>Unit B</h4>

          <select id="unitBSelect" class="form-select mb-3"></select>

          <div class="mb-2">
            <label for="unitBAge" class="form-label">Age:</label>
            <select id="unitBAge" class="form-select form-select-sm" style="width:auto;">
              <option value="2">Age II</option>
              <option value="3">Age III</option>
              <option value="4">Age IV</option>
            </select>
          </div>

          <div class="attack-toggle btn-group mb-3" role="group">
            <input type="radio" class="btn-check" name="attackSelectB" id="attackB1" value="primary" checked>
            <label class="btn btn-outline-primary" for="attackB1">Primary</label>
            <input type="radio" class="btn-check" name="attackSelectB" id="attackB2" value="secondary">
            <label class="btn btn-outline-primary" for="attackB2">Secondary</label>
            <input type="radio" class="btn-check" name="attackSelectB" id="attackBBoth" value="both">
            <label class="btn btn-outline-primary" for="attackBBoth">Both</label>
          </div>

          <div class="mb-3">
            <label>Unit Count</label>
            <input id="countB" type="number" class="form-control" value="10" min="1">
          </div>

          <hr>
          <h5>Editable Stats (overrides JSON)</h5>
          <div class="row g-2 small">
            <div class="col-6"><label>HP</label><input id="unitBHP" type="number" class="form-control form-control-sm"></div>
            <div class="col-6"><label>Melee Armor</label><input id="unitBMeleeArmor" type="number" class="form-control form-control-sm"></div>
            <div class="col-6"><label>Ranged Armor</label><input id="unitBRangedArmor" type="number" class="form-control form-control-sm"></div>
            <div class="col-6"><label>Attack</label><input id="unitBAttack" type="number" class="form-control form-control-sm"></div>
            <div class="col-6"><label>Attack Speed (s)</label><input id="unitBAttackSpeed" type="number" step="0.01" class="form-control form-control-sm"></div>
            <div class="col-6"><label>Range</label><input id="unitBRange" type="number" step="0.01" class="form-control form-control-sm"></div>
            <div class="col-12"><label>Bonus Damage (JSON)</label>
              <input id="unitBBonus" type="text" class="form-control form-control-sm" placeholder='e.g. {"Ranged": 9}'>
            </div>
          </div>

          <!-- Buffs for Unit B (same as A) -->
          <hr>
          <h5>Buffs</h5>
          <div id="buffB">
            <!-- Keep your original buff inputs here — unchanged -->
          </div>

          <div class="card mt-3">
            <div class="card-header">Combat Advantage</div>
            <div class="card-body">
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" id="firstHitEnabledB">
                <label class="form-check-label" for="firstHitEnabledB">Enable first-hit advantage</label>
              </div>
              <div class="mb-2">
                <label for="freeHitsB" class="form-label">Free hits before opponent starts</label>
                <input type="number" class="form-control" id="freeHitsB" min="0" step="1" value="0">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ====================== RESULTS ====================== -->
    <div class="mt-4 card p-3 shadow-sm">
      <h4 class="text-center">Battle Results</h4>
      <div id="results" class="mt-2 text-center small text-muted">
        Select units and press Battle to start simulation...
      </div>
    </div>
  </div>
</body>
</html>